<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Image Features</title>
    <style>
        body { text-align: center; font-family: Arial, sans-serif; }
        .container { position: relative; display: inline-block; }
        
        #magnifier {
            position: absolute; border: 3px solid #000; width: 100px; height: 100px; 
            border-radius: 50%; cursor: zoom-in; background-repeat: no-repeat; display: none;
            pointer-events: none;
        }
        
        /* Filters */
        .filters { margin: 10px 0; }
        .filters button { margin: 5px; padding: 10px; }
        .grayscale { filter: grayscale(100%); }
        .sepia { filter: sepia(100%); }
        .blur { filter: blur(5px); }
        
        /* Image Zoom Lightbox */
        #lightbox { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0, 0, 0, 0.8); justify-content: center; align-items: center; }
        #lightbox img { max-width: 80%; max-height: 80%; border: 3px solid white; }
        
        /* Image Comparison Slider */
        .comparison-container { position: relative; width: 400px; }
        .comparison-container img { position: absolute; width: 100%; }
        .comparison-slider { position: absolute; top: 0; left: 50%; width: 5px; height: 100%; background: red; cursor: ew-resize; }
        
        /* 3D Tilt */
        .tilt-effect { transition: transform 0.3s ease; }
    </style>
</head>
<body>
    <iframe src="layout.html" style="width: 100%; height: 110px; border: none;"></iframe>
    <div class="container">
        <img id="image" src="https://picsum.photos/600/400" alt="Image" class="tilt-effect">
        <div id="magnifier"></div>
    </div>
    
    <div class="filters">
        <button onclick="applyFilter('grayscale')">Grayscale</button>
        <button onclick="applyFilter('sepia')">Sepia</button>
        <button onclick="applyFilter('blur')">Blur</button>
        <button onclick="applyFilter('')">Reset</button>
    </div>
    
    <button onclick="showLightbox()">Zoom Image</button>
    <button onclick="downloadImage()">Download Image</button>
    
    <div id="lightbox" onclick="hideLightbox()">
        <img id="lightbox-img" src="">
    </div>
    
    <script>
        const magnifier = document.getElementById('magnifier');
        const image = document.getElementById('image');
        
        image.addEventListener('mousemove', magnify);
        image.addEventListener('mouseenter', () => magnifier.style.display = 'block');
        image.addEventListener('mouseleave', () => magnifier.style.display = 'none');
        
        function magnify(e) {
            const rect = image.getBoundingClientRect();
            let x = e.pageX - rect.left - window.scrollX;
            let y = e.pageY - rect.top - window.scrollY;
            let bgX = (x / rect.width) * 100;
            let bgY = (y / rect.height) * 100;
            
            magnifier.style.backgroundImage = `url(${image.src})`;
            magnifier.style.backgroundSize = `${rect.width * 2}px ${rect.height * 2}px`;
            magnifier.style.backgroundPosition = `${bgX}% ${bgY}%`;
            magnifier.style.left = x - 50 + 'px';
            magnifier.style.top = y - 50 + 'px';
        }
        
        function applyFilter(filter) {
            image.className = filter;
        }
        
        function showLightbox() {
            document.getElementById('lightbox-img').src = image.src;
            document.getElementById('lightbox').style.display = 'flex';
        }
        
        function hideLightbox() {
            document.getElementById('lightbox').style.display = 'none';
        }
        
        function downloadImage() {
            let link = document.createElement('a');
            link.href = image.src;
            link.download = 'image.jpg';
            link.click();
        }

        image.addEventListener('mousemove', (e) => {
            let x = (e.offsetX / image.offsetWidth - 0.5) * 30;
            let y = (e.offsetY / image.offsetHeight - 0.5) * -30;
            image.style.transform = `rotateY(${x}deg) rotateX(${y}deg)`;
        });

        image.addEventListener('mouseleave', () => {
            image.style.transform = 'rotateY(0deg) rotateX(0deg)';
        });
    </script>
</body>
</html>
